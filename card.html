<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"/>
</head>
<body>
<div class="container">
    <div class="card mt-5">
        <div class="card-body boleia-card-shadow">
            <div class="d-flex flex-row align-items-center boleia-header">
                <img class="ms-4 d-none d-md-block" src="./images/car-placeholder.png" alt="Car">
                <div class="me-auto p-2 ms-5">
                    Silves - Ismat
                </div>
                <div class="ms-auto p-2 me-5">
                    21/01
                </div>
                <div class="p-2 me-5">
                    14:00
                </div>
                <div class="p-2">
                    <button class="btn" type="button" data-bs-toggle="collapse" data-bs-target="#cardContent"
                            aria-expanded="false" aria-controls="#cardContent"
                            onclick="changeExpandIcon(this.childNodes[1])">
                        <img src="./images/icons/icon-down.svg" style="height: 24px" alt="expandir">
                    </button>
                </div>

            </div>


            <div class="collapse" id="cardContent">
                <div class="card-blocker"></div>
                <div class="row">
                    <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                        <div class="table-responsive text-nowrap">
                            <table class="text-nowrap w-auto">
                                <tbody>
                                <tr>
                                    <td><img class="ms-4 p-2 me-2" src="./images/icons/profile-icon.png"
                                             alt="Profile Image"></td>
                                    <td class="ps-3">Condutor</td>
                                    <td>
                                        <img class="ms-5 mb-2" src="./images/icons/star-fill.svg" alt="Star Filled"
                                             style="height: 28px;">
                                        <img class="mb-2" src="./images/icons/star-fill.svg" alt="Star Filled"
                                             style="height: 28px;">
                                        <img class="mb-2" src="./images/icons/star-fill.svg" alt="Star Filled"
                                             style="height: 28px;">
                                        <img class="mb-2" src="./images/icons/star-half.svg" alt="Star Half Filled"
                                             style="height: 28px;">
                                        <img class="mb-2" src="./images/icons/star.svg" alt="Star"
                                             style="height: 28px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td><img class="ms-4 p-2 me-2" src="./images/icons/profile-icon.png"
                                             alt="Profile Image"></td>
                                    <td class="ps-3">Jorge</td>
                                    <td>
                                        <img class="ms-5 mb-2" src="./images/icons/star-fill.svg" alt="Star Filled"
                                             style="height: 28px;">
                                        <img class="mb-2" src="./images/icons/star.svg" alt="Star Filled"
                                             style="height: 28px;">
                                        <img class="mb-2" src="./images/icons/star.svg" alt="Star Filled"
                                             style="height: 28px;">
                                        <img class="mb-2" src="./images/icons/star.svg" alt="Star Half Filled"
                                             style="height: 28px;">
                                        <img class="mb-2" src="./images/icons/star.svg" alt="Star"
                                             style="height: 28px;">
                                    </td>
                                    </td>
                                </tr>
                                <tr>
                                    <td><img class="ms-4 p-2 me-2" src="./images/icons/profile-icon.png"
                                             alt="Profile Image"></td>
                                    <td class="ps-3">Bernardo</td>
                                    <td id="a">
<!--                                        <div class="ms-5">-->
<!--                                            <img class="mb-2" src="./images/icons/star-fill.svg" alt="Star Filled"-->
<!--                                                 style="height: 28px;">-->
<!--                                            <img class="mb-2" src="./images/icons/star-fill.svg" alt="Star Filled"-->
<!--                                                 style="height: 28px;">-->
<!--                                            <img class="mb-2" src="./images/icons/star.svg" alt="Star Filled"-->
<!--                                                 style="height: 28px;">-->
<!--                                            <img class="mb-2" src="./images/icons/star.svg" alt="Star Half Filled"-->
<!--                                                 style="height: 28px;">-->
<!--                                            <img class="mb-2" src="./images/icons/star.svg" alt="Star"-->
<!--                                                 style="height: 28px;">-->
<!--                                        </div>-->

                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="col-lg-5 col-md-12 col-sm-12 col-xs-12">
                        <div class="card">
                            <div class="card-header">
                                Descrição
                            </div>
                            <div class="card-body">
                               <p>Veículo:<br>
                                   &emsp; Marca: BMW<br>
                                   &emsp; Modelo: Serie 5<br>
                                   &emsp; Cor: Cinzento<br>
                                   &emsp; Matrícula: 12-MH-98<br>
                                   Preço: 2€</p>
                            </div>
                        </div>
                        <div class="mt-3 px-1">
                            <p>Lugares Disponíveis: 1</p>
                        </div>
                    </div>

                </div>
                <div style="height: 40px"></div>
                <button type="button" class="btn-ismat-large float-end">Reservar</button>

            </div>
        </div>
    </div>

</div>

<script>
    function changeExpandIcon(element) {
        element.src = (element.src.includes('icon-down.svg')) ? './images/icons/icon-up.svg' : './images/icons/icon-down.svg';
    }

    function createStar(div,score){
        let star;
        if(score >= 0 && score < 0.5){
            star = "star";
        }else if(score >= 0.5 && score < 1){
            star = "star-half";
        }else if(score === 1){
            star = "star-fill";
        }
        let img = document.createElement("img");
        img.className = "mb-2";
        img.src="./images/icons/" + star + ".svg";
        img.alt=star;
        img.style.height = "28px";
        div.appendChild(img);
    }

    function getStarScore(rating){
        var array = [];
        let a = rating;
        for (let i = 0; i < 5; i++) {
            if (a>=1){
                array.push(1);
            }else if (a>=0.5 && a<1){
                array.push(a);
            }else if (a>=0 && a<0.5){
                array.push(a);
            }else {
                array.push(0);
            }
            a--;
        }
        return array;
    }

    function starRatingGenerator(element,rating){
        let div = document.createElement('div');
        div.className = "ms-5";
        element.appendChild(div)
        let array = getStarScore(rating);
        console.log(array)
        for (let i = 0; i < 5; i++) {
            createStar(div,array[i]);
        }

    }
    starRatingGenerator(document.getElementById("a") ,3)
</script>


</body>
</html>

